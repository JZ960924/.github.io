<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>首页</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="../CSS/reset.css">
    <link rel="stylesheet" href="../CSS/sm.css">
    <link rel="stylesheet" href="../CSS/index.css">
  </head>
  <body>
    <div class="page-group login">
        <div class="page page-current">
        	<!-- 页面内容 -->
        	<div class="content-padded flex-box-v flex-center-center">
        		<img src="../Img/indexImg_login.png" class="loginImg">
        		<div class="loginPos flex-box-v flex-center-center">
        			<img src="../Img/indexImg_19.png" class="loginIcon">
        			<div class="logoFont">logo</div>
        			 <div class="list-block">
					    <ul>
					      <!-- Text inputs -->
					      <li>
					        <div class="item-content">
					          <div class="item-media"><i class="icon icon-form-name"></i></div>
					          <div class="item-inner">
					            <div class="item-input">
					              <input type="text" placeholder="手机号" class="phone">
					            </div>
					          </div>
					        </div>
					      </li>
					      <li>
					        <div class="item-content">
					          <div class="item-media"><i class="icon icon-form-password"></i></div>
					          <div class="item-inner">
					            <div class="item-input flex-box flex-h-ce codeInput">
					              <input type="text" placeholder="验证码" class="inputCode">
					              <span class="sendCode">获取验证码</span>
					              <span class="timeCode" style="display: none">60秒</span>
					            </div>
					          </div>
					        </div>
					      </li>
					      <li>
					        <div class="item-content">
					          <div class="item-media"><i class="icon icon-form-password"></i></div>
					          <div class="item-inner">
					            <div class="item-input flex-box flex-h-ce codeInput">
					              <input type="password" placeholder="密码" class="password">
        						  <img src="../Img/loginImg_eye.png" class="eyeIcon">
					            </div>
					          </div>
					        </div>
					      </li>
					    </ul>
					    <button class='loginBtn'>登录/注册</button>
					  </div>
        			<div class="loginBottom">登录已代表您阅读且同意XX的 <span>服务协议</span></div>
        		</div>
			</div>
        </div>
    </div>
    <script src="../JS/jquery.3.3.1.min.js"></script>
    <script>var Zepto=jQuery</script>
    <script type='text/javascript' src='../JS/sm.min.js' charset='utf-8'></script>
    <script type="text/javascript">
    	$(".eyeIcon").click(function(){
    		if($('.password').attr('type')=='password'){
				$('.password').prop('type','text');
    		}else{
				$('.password').prop('type','password');
    		}
    	})
    	$(".sendCode").click(function(){
    		var pattern = /^1[34578]\d{9}$/;
    		if($(".phone").val()==''){
    			$.toast('请先输入手机号码！');
    			$(".phone").focus();
    		}else if(!pattern.test($(".phone").val())){
    			$.toast('请输入正确的手机号码！')
    			$(".phone").focus();
    		}else{
    			// 短信是否发送url
    		  $.post("demo_test_post.asp",{
                  phone:$(".phone").val()
              },
              function(data,status){
                if(data.code==200){// 判读后台返回状态码
                	$('.sendCode').hide();
                	$('.timeCode').show();
                	$.toast('验证码已发送，请注意查收')
                	var s=60;
                	var count=setInterval(function(){
                		s--;
                		if(s>=0){
                			$(".timeCode").html(s+'秒');
                		}else{
                			clearInterval(count);
                			var s=60;
                			$(".timeCode").hide();
                			$(".sendCode").show();
                		}
                	},1000)
                }
              });
    		}
    		
    	})
    	$(".loginBtn").click(function(argument) {
    		// body...
    		var pattern = /^1[34578]\d{9}$/;
    		if($(".phone").val()==''){
    			$.toast('请先输入手机号码！');
    			$(".phone").focus();
    		}else if(!pattern.test($(".phone").val())){
    			$.toast('请输入正确的手机号码！')
    			$(".phone").focus();
    		} else if($(".inputCode").val()==''&&$(".password").val()==''){
    			$.toast('请输入验证码或密码！')
    		}else{
    			// 密码或验证码是否正确
				$.post("demo_test_post.asp",{
                  phone:$(".phone").val(),
                  inputCode:$(".inputCode").val(),
                  password:$(".password").val(),
              },
              function(data,status){
                if(data.code==200){
                	window.location.href = "index.html";
                }else{
                	$.toast('验证码或密码输入错误！')
                }
              });
    		}

    	})
    </script>
  </body>
</html>
